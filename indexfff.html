
<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
	

	<!-- Отправка запроса через форму -->
	<form id="sberpay" action="sberpay.php">
		<input type="hidden" name="userName" value="sfu-kras-api">
		<input type="hidden" name="password" value="sfu-kras">
		<label for="orderNumber">Введите номер заказа</label>
		<input type="text" name="orderNumber" value="2" id="orderNumber">
		<input type="hidden" name="returnUrl" value="https://zloileshii.000webhostapp.com/node/1">
		<input type="hidden" name="failUrl" value="https://zloileshii.000webhostapp.com/node/2">
		<label for="amount">Введите сумму</label>
		<input type="number" name="amount" id="amount">
		<input type="submit" class="btn btn-success text-white" value="Платежная форма">
	</form>
	<hr>
	<!-- Конец отправки запроса через форму -->

	<script>
		$(document).ready(function(json){
			$('#sberpay').submit(function(evt){
				//evt.preventDefault();
				alert('Is Ok!');
				json = JSON.stringify($(this).serializeArray());
				console.log(json);
			})
		})
	</script>

<!-- 	<script>
		$(document).ready(function(){
			$('#sberpay').submit(function(evt){
				evt.preventDefault();
				alert('Is ok!');
				$.ajax({
					type: 'post',
					url: 'sberpay.module.php',
					data: new FormData(this),
    				processData: false,
    				contentType: false,
					success: function(res){
						alert(res);
						console.log('Успех'+res);
					},
					error: function(err){
						alert(err);
						console.log('Ошибка'+err);
					},
				});
			});
		});
	</script> -->



	<!-- Отправка запроса через ссылку -->
	<a href='https://3dsec.sberbank.ru/payment/rest/register.do?userName=sfu-kras-api&password=sfu-kras&description=Оплата+обучения+онлайн&returnUrl=https://vogu35.ru&failUrl=https://4pda.ru&orderNumber=11&amount=100&jsonParams={"fio":"Мальчиков+Михаил+Александрович","dealId":"И00031487","email":"test@gmail.com","phone":"+79261111111"}' class="btn btn-link">Оплптп через Link</a>
	<!-- Конец отправки запроса через ссылку -->


	<!-- После отправки формы происходит редирект на страницу: -->
	<!-- https://3dsec.sberbank.ru/payment/rest/register.do -->
	<!-- На которой находится массив: -->
	<!-- {"orderId":"0380b5ae-53b3-7300-83c9-78925e369d04","formUrl":"https://3dsec.sberbank.ru/payment/merchants/sbersafe/payment_ru.html?mdOrder=0380b5ae-53b3-7300-83c9-78925e369d04"} -->



	<!-- Отправка запроса через ajax, который нельзя -->
	<button id="sberPay" class="btn btn-success text-white">Оплатить</button>
	<script>
		$('#sberPay').click(function(){
			//url = 'amount=100&orderNumber=87654321&returnUrl=https://zloileshii.000webhostapp.com/node/1';
			urlTestDevPost = 'amount=100&orderNumber=87654321&returnUrl=https://server/applicaton_context/finish.html';
			$.ajax({
				type: 'post',
				//url: url,
				url: urlTestDevPost,
				//dataType: 'json',
				success:function(res){
					alert('Успех!');
					console.log(res);
					$('#sberPay').after('<p>'+res+'</p>');
				},
				error:function(err){
					alert('Что-то пошло не так.');
					console.log(err);
				}
			});
		})
	</script>
	<hr>
	<!-- Конец отправки запроса через ajax, который нельзя -->



	<!-- Метка времени -->
	<script>
		console.log(Date.now());
	</script>
	<!-- Конец метки времени -->

</body>
</html>